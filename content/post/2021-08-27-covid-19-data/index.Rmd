---
title: COVID-19 Data
author: Randi Bolt
date: '2021-08-27'
slug: covid-19-data
categories:
  - rstudio
  - data
tags:
  - rstudio
  - covid
  - data
  - data visualisation
draft: TRUE
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE)
library(magrittr)
library(dplyr)
library(readr)
library(tidyr)
library(lubridate)
library(pander)
library(ggplot2)
library(scales) #commas 
library(gt) #format tables
library(gridExtra) # grid.arrange
```

## Background and Data

COVID-19 is causing havoc in Oregon once again, and as numbers continue to spike and school draws closer and closer, I decided it would be the perfect time to revisit one the of the first projects I worked on in R Studio. That project can be seen [here](https://rbolt13.github.io/rsite/covid.html), and used data from Johns Hopkins. This investigation will use data from the NY times that has more current updates. The repository for the NY Times data can be found [here](https://github.com/nytimes/covid-19-data), and the datasets that are being included are : 

1. **us.states** : state level data (file description [here](https://github.com/nytimes/covid-19-data/blob/master/README.md))

2. **us.counties** : county-level data (file description [here](https://github.com/nytimes/covid-19-data/blob/master/README.md))

3. **colleges** : number of reported cases among students and employees at American colleges and universities, updated May 26th (file description [here](https://github.com/nytimes/covid-19-data/tree/master/colleges))

4. **mask_use** : survey between July 2 and July 14 (2020) where participants were asked, _"How oftern do you wear a mask in public when you expect to be within six feet of another person?"_ (file description [here](https://github.com/nytimes/covid-19-data/tree/master/mask-use)) 

5. **vacc**: state level COVID-19 daily vaccination numbers time series data from the Johns Hopkins University repository (file description [here](https://github.com/govex/COVID-19/blob/master/data_tables/vaccine_data/us_data/readme.md))

6. **policytrackerOR**:  dates and description of policies going into/out of effect in Oregon.  To load data for a particular state go to [here](https://github.com/govex/COVID-19/tree/govex_data/data_tables/policy_data/table_data/Current), find the name of the state file you want to work with. 

Here is the data :

```{r load_data}
us.states <- read_csv('https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv')
us.counties <- read_csv('https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv')
colleges <- read_csv('https://raw.githubusercontent.com/nytimes/covid-19-data/master/colleges/colleges.csv')
mask_use <- read_csv('https://raw.githubusercontent.com/nytimes/covid-19-data/master/colleges/colleges.csv')
vacc <- read_csv("https://raw.githubusercontent.com/govex/COVID-19/master/data_tables/vaccine_data/us_data/time_series/people_vaccinated_us_timeline.csv")
policytrackerOR <- read_csv("https://raw.githubusercontent.com/govex/COVID-19/govex_data/data_tables/policy_data/table_data/Current/Oregon_policy.csv")
```

# Wrangling the Data
The data set is already in long form (the dates are in rows instead of columns), and the date is already saved as a date variable. Therefore the main tasks here are to join the us.states data set with the vaccination records. 

```{r}
us.states.vacc <- us.states %>%
  select(date, state, cases, deaths) %>%
  full_join(vacc %>%
              select(Province_State, Date, Lat, Long_, People_Fully_Vaccinated, People_Partially_Vaccinated),
            by = c("state"="Province_State", "date"="Date"))
head(us.states.vacc, n=5)
```

Note: People_Fully_Vaccinated and People_Partially_Vaccinated show as NA because of the dates displayed were before the vaccine was released.

---
Can I find population data? 

# Using the data
```{r}
us.states.vacc %>%
  filter(date == "2021-08-29") %>%
  arrange(desc(cases))
```





```{r}
us.states.vacc %>%
  filter(state == "Oregon") %>%
  arrange(desc(cases, date))

```






